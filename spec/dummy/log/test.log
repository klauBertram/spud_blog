Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (1.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (0.8ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.0ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.2ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (1.6ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (2.6ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (1.2ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.5ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.6ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:36:27', NULL, 1, 'Test', 0, 2, '2012-12-22 20:36:27', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.9ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpudPostCategory Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.9ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.4ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.6ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:37:59', NULL, 1, 'Test', 0, 2, '2012-12-22 20:37:59', 'test')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.2ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.5ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (1.2ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.3ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (3.9ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:38:30', NULL, 1, 'Test', 0, 2, '2012-12-22 20:38:30', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.2ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (0.8ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.1ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (0.7ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.6ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (30.6ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:39:47', NULL, 1, 'Test', 0, 2, '2012-12-22 20:39:47', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.4ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.4ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.4ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.9ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.5ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.2ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.7ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.4ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:47:18', NULL, 1, 'Test', 0, 2, '2012-12-22 20:47:18', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.4ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:47:18', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:47:18', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:47:18', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:47:18', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.5ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.6ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (1.1ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.4ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.6ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (1.0ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:47:42', NULL, 1, 'Test', 0, 2, '2012-12-22 20:47:42', 'test')
  [1m[36mSpudPostCategory Load (0.4ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.5ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:47:42', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:47:42', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:47:42', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:47:42', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:47:42', 0, NULL, NULL, '2012-12-21 20:47:42', 1, 'Post 1', '2012-12-22 20:47:42', '2012-12-21-post-1', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.4ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (1.2ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.5ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.2ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.4ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:48:33', NULL, 1, 'Test', 0, 2, '2012-12-22 20:48:33', 'test')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:48:33', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:48:33', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:48:33', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:48:33', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:48:33', 0, NULL, NULL, '2012-12-21 20:48:32', 1, 'Post 1', '2012-12-22 20:48:33', '2012-12-21-post-1', 1)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:48:33', 0, NULL, NULL, '2012-12-21 20:48:32', 1, 'Post 2', '2012-12-22 20:48:33', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:48:33', 0, NULL, NULL, '2012-12-21 20:48:32', 1, 'Post 3', '2012-12-22 20:48:33', '2012-12-21-post-3', 1)
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.3ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategoriesPost Load (0.2ms)[0m  [1mSELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2)[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE `spud_posts`.`id` IN (1)
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.0ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.0ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.7ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (2.5ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (1.0ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.5ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.7ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.8ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:49:10', NULL, 1, 'Test', 0, 2, '2012-12-22 20:49:10', 'test')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.4ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:49:10', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:49:10', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:49:10', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:49:10', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.3ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:49:10', 0, NULL, NULL, '2012-12-21 20:49:10', 1, 'Post 1', '2012-12-22 20:49:10', '2012-12-21-post-1', 1)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:49:10', 0, NULL, NULL, '2012-12-21 20:49:10', 1, 'Post 2', '2012-12-22 20:49:10', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:49:10', 0, NULL, NULL, '2012-12-21 20:49:10', 1, 'Post 3', '2012-12-22 20:49:10', '2012-12-21-post-3', 1)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategoriesPost Load (0.2ms)[0m  [1mSELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2)[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1)
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.4ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (2.6ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.6ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.9ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.2ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:50:21', NULL, 1, 'Test', 0, 2, '2012-12-22 20:50:21', 'test')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.4ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:50:21', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:50:21', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:50:21', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:50:21', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:50:21', 0, NULL, NULL, '2012-12-21 20:50:21', 1, 'Post 1', '2012-12-22 20:50:21', '2012-12-21-post-1', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:50:21', 0, NULL, NULL, '2012-12-21 20:50:21', 1, 'Post 2', '2012-12-22 20:50:21', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:50:21', 0, NULL, NULL, '2012-12-21 20:50:21', 1, 'Post 3', '2012-12-22 20:50:21', '2012-12-21-post-3', 1)
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.1ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.4ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.4ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.5ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (1.0ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (0.9ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:50:34', NULL, 1, 'Test', 0, 2, '2012-12-22 20:50:34', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.4ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:50:34', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:50:34', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:50:34', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:50:34', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:50:35', 0, NULL, NULL, '2012-12-21 20:50:34', 1, 'Post 1', '2012-12-22 20:50:35', '2012-12-21-post-1', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:50:35', 0, NULL, NULL, '2012-12-21 20:50:34', 1, 'Post 2', '2012-12-22 20:50:35', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:50:35', 0, NULL, NULL, '2012-12-21 20:50:34', 1, 'Post 3', '2012-12-22 20:50:35', '2012-12-21-post-3', 1)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 2) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategoriesPost Load (0.2ms)[0m  [1mSELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2)[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1)
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.9ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.3ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (0.9ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (1.4ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.6ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.7ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.6ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:51:30', NULL, 1, 'Test', 0, 2, '2012-12-22 20:51:30', 'test')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.4ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.5ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.4ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:51:30', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:51:30', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:51:30', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:51:30', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.1ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:51:30', 0, NULL, NULL, '2012-12-21 20:51:30', 1, 'Post 1', '2012-12-22 20:51:30', '2012-12-21-post-1', 1)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:51:30', 0, NULL, NULL, '2012-12-21 20:51:30', 1, 'Post 2', '2012-12-22 20:51:30', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:51:30', 0, NULL, NULL, '2012-12-21 20:51:30', 1, 'Post 3', '2012-12-22 20:51:30', '2012-12-21-post-3', 1)
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.4ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 2) ORDER BY `spud_post_categories`.`lft`
[2]
  [1m[36mSpudPostCategoriesPost Load (0.2ms)[0m  [1mSELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2)[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1)
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.4ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.5ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (1.1ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.6ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (2.9ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:51:48', NULL, 1, 'Test', 0, 2, '2012-12-22 20:51:48', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:51:48', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:51:48', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:51:48', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:51:48', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:51:48', 0, NULL, NULL, '2012-12-21 20:51:48', 1, 'Post 1', '2012-12-22 20:51:48', '2012-12-21-post-1', 1)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.5ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:51:48', 0, NULL, NULL, '2012-12-21 20:51:48', 1, 'Post 2', '2012-12-22 20:51:48', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:51:48', 0, NULL, NULL, '2012-12-21 20:51:48', 1, 'Post 3', '2012-12-22 20:51:48', '2012-12-21-post-3', 1)
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.4ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 2) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategoriesPost Load (0.2ms)[0m  [1mSELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2)[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1)
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.4ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.4ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (1.1ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.5ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.7ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.4ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:14', NULL, 1, 'Test', 0, 2, '2012-12-22 20:52:14', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.4ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:14', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:52:14', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:14', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:52:14', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:52:14', 0, NULL, NULL, '2012-12-21 20:52:14', 1, 'Post 1', '2012-12-22 20:52:14', '2012-12-21-post-1', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.4ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:52:14', 0, NULL, NULL, '2012-12-21 20:52:14', 1, 'Post 2', '2012-12-22 20:52:14', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:52:14', 0, NULL, NULL, '2012-12-21 20:52:14', 1, 'Post 3', '2012-12-22 20:52:14', '2012-12-21-post-3', 1)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 2) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategoriesPost Load (0.2ms)[0m  [1mSELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1)
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.2ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.5ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.7ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.9ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.9ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.0ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:38', NULL, 1, 'Test', 0, 2, '2012-12-22 20:52:38', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.4ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:38', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:52:38', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:38', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:52:38', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.1ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (0.8ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.7ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.2ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:55', NULL, 1, 'Test', 0, 2, '2012-12-22 20:52:55', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.4ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:55', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:52:55', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:52:55', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:52:55', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.1ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.4ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:52:55', 0, NULL, NULL, '2012-12-21 20:52:54', 1, 'Post 1', '2012-12-22 20:52:55', '2012-12-21-post-1', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:52:55', 0, NULL, NULL, '2012-12-21 20:52:54', 1, 'Post 2', '2012-12-22 20:52:55', '2012-12-21-post-2', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:52:55', 0, NULL, NULL, '2012-12-21 20:52:54', 1, 'Post 3', '2012-12-22 20:52:55', '2012-12-21-post-3', 1)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 4) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategoriesPost Load (0.2ms)[0m  SELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2, 3)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1, 2)[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.4ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.6ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.9ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.2ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:54:44', NULL, 1, 'Test', 0, 2, '2012-12-22 20:54:44', 'test')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:54:44', NULL, 1, 'Post Category 2', 0, 2, '2012-12-22 20:54:44', 'post-category-2')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE (`spud_post_categories`.`name` = BINARY 'Post Category 2' AND `spud_post_categories`.`id` != 2) LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE (`spud_post_categories`.`url_name` = BINARY 'post-category-2' AND `spud_post_categories`.`id` != 2) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:54:44', NULL, 1, 'Post Category 4', 0, 2, '2012-12-22 20:54:44', 'post-category-4')[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 3)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 3)[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 5' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-5' LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:54:44', NULL, 3, 'Post Category 5', 3, 4, '2012-12-22 20:54:44', 'post-category-5')[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft` LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 4 THEN 3 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 4) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1 FOR UPDATE[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:54:44', 0, NULL, NULL, '2012-12-21 20:54:44', 1, 'Post 1', '2012-12-22 20:54:44', '2012-12-21-post-1', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 3)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:54:44', 0, NULL, NULL, '2012-12-21 20:54:44', 1, 'Post 2', '2012-12-22 20:54:44', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 4)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:54:44', 0, NULL, NULL, '2012-12-21 20:54:44', 1, 'Post 3', '2012-12-22 20:54:44', '2012-12-21-post-3', 1)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 4) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategoriesPost Load (0.2ms)[0m  [1mSELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (3, 4)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1, 2)
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.1ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.9ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (0.9ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (0.9ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (2.4ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (0.7ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (1.1ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.0ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:55:12', NULL, 1, 'Test', 0, 2, '2012-12-22 20:55:12', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:55:13', NULL, 1, 'Post Category 2', 0, 2, '2012-12-22 20:55:13', 'post-category-2')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE (`spud_post_categories`.`name` = BINARY 'Post Category 2' AND `spud_post_categories`.`id` != 2) LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.4ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE (`spud_post_categories`.`url_name` = BINARY 'post-category-2' AND `spud_post_categories`.`id` != 2) LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:55:13', NULL, 1, 'Post Category 4', 0, 2, '2012-12-22 20:55:13', 'post-category-4')[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 3)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 3)[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 5' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-5' LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:55:13', NULL, 3, 'Post Category 5', 3, 4, '2012-12-22 20:55:13', 'post-category-5')[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft` LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 4 THEN 3 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategory Load (0.5ms)[0m  [1mSELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)[0m
  [1m[35mSpudPostCategory Load (0.3ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 4) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1 FOR UPDATE[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft`
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:55:13', 0, NULL, NULL, '2012-12-21 20:55:12', 1, 'Post 1', '2012-12-22 20:55:13', '2012-12-21-post-1', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 3)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:55:13', 0, NULL, NULL, '2012-12-21 20:55:12', 1, 'Post 2', '2012-12-22 20:55:13', '2012-12-21-post-2', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 4)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:55:13', 0, NULL, NULL, '2012-12-21 20:55:12', 1, 'Post 3', '2012-12-22 20:55:13', '2012-12-21-post-3', 1)
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 4) ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPostCategoriesPost Load (0.1ms)[0m  [1mSELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (3, 4)[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1, 2)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.2ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.3ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (0.9ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (0.7ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (0.9ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.5ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (0.7ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.0ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:55:43', NULL, 1, 'Test', 0, 2, '2012-12-22 20:55:43', 'test')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.5ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:55:43', NULL, 1, 'Post Category 2', 0, 2, '2012-12-22 20:55:43', 'post-category-2')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE (`spud_post_categories`.`name` = BINARY 'Post Category 2' AND `spud_post_categories`.`id` != 2) LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE (`spud_post_categories`.`url_name` = BINARY 'post-category-2' AND `spud_post_categories`.`id` != 2) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  UPDATE `spud_post_categories` SET `parent_id` = 2, `updated_at` = '2012-12-22 20:55:43' WHERE `spud_post_categories`.`id` = 2
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:55:43', NULL, 1, 'Post Category 4', 0, 2, '2012-12-22 20:55:43', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 5' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-5' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:55:43', NULL, 3, 'Post Category 5', 3, 4, '2012-12-22 20:55:43', 'post-category-5')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 4 THEN 3 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 4) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 4)
  [1m[36mSpudPost Load (0.1ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.4ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:55:43', 0, NULL, NULL, '2012-12-21 20:55:43', 1, 'Post 1', '2012-12-22 20:55:43', '2012-12-21-post-1', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 3)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:55:43', 0, NULL, NULL, '2012-12-21 20:55:43', 1, 'Post 2', '2012-12-22 20:55:43', '2012-12-21-post-2', 1)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 4)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:55:43', 0, NULL, NULL, '2012-12-21 20:55:43', 1, 'Post 3', '2012-12-22 20:55:43', '2012-12-21-post-3', 1)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 4) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategoriesPost Load (0.2ms)[0m  SELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (3, 4)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1, 2)[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (2.2ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (1.3ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (1.6ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (1.0ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (1.0ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (1.0ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (0.8ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (0.9ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:57:29', NULL, 1, 'Test', 0, 2, '2012-12-22 20:57:29', 'test')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:57:29', NULL, 1, 'Post Category 3', 0, 2, '2012-12-22 20:57:29', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:57:29', NULL, 3, 'Post Category 4', 2, 4, '2012-12-22 20:57:29', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-1' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:57:29', 0, NULL, NULL, '2012-12-21 20:57:29', 1, 'Post 1', '2012-12-22 20:57:29', '2012-12-21-post-1', 1)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-2' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:57:29', 0, NULL, NULL, '2012-12-21 20:57:29', 1, 'Post 2', '2012-12-22 20:57:29', '2012-12-21-post-2', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2012-12-21-post-3' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2012-12-22 20:57:29', 0, NULL, NULL, '2012-12-21 20:57:29', 1, 'Post 3', '2012-12-22 20:57:29', '2012-12-21-post-3', 1)[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 4) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategoriesPost Load (0.2ms)[0m  SELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2, 3)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1, 2)[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 5' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-5' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:57:29', NULL, 1, 'Post Category 5', 0, 2, '2012-12-22 20:57:29', 'post-category-5')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 4)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 4)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 6' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-6' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:57:29', NULL, 3, 'Post Category 6', 4, 4, '2012-12-22 20:57:29', 'post-category-6')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 5 THEN 4 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 5)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 5 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 5)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 5) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 5)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 5 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 5)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 7' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-7' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2012-12-22 20:57:29', NULL, 5, 'Post Category 7', 5, 6, '2012-12-22 20:57:29', 'post-category-7')
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 6 - 4 WHEN `lft` BETWEEN 5 AND 6 THEN `lft` + 3 - 5 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 6 - 4 WHEN `rgt` BETWEEN 5 AND 6 THEN `rgt` + 3 - 5 ELSE `rgt` END, `parent_id` = CASE WHEN id = 6 THEN 5 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 3 AND `spud_post_categories`.`rgt` >= 4) AND (`spud_post_categories`.id != 6)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 2 WHERE `spud_post_categories`.`id` = 6 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 3 AND `spud_post_categories`.`rgt` >= 4) AND (`spud_post_categories`.id != 6)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 3 AND `spud_post_categories`.`lft` < 4) AND (`spud_post_categories`.id != 6) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 3 AND `spud_post_categories`.`rgt` >= 4) AND (`spud_post_categories`.id != 6)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 2 WHERE `spud_post_categories`.`id` = 6 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 3 AND `spud_post_categories`.`rgt` >= 4) AND (`spud_post_categories`.id != 6)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.3ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE `spud_post_categories` SET `parent_id` = 4 WHERE `spud_post_categories`.`parent_id` = 5 ORDER BY lft
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` LEFT OUTER JOIN `spud_post_categories` AS parent ON `spud_post_categories`.`parent_id` = parent.id WHERE (`spud_post_categories`.`lft` IS NULL OR `spud_post_categories`.`rgt` IS NULL OR `spud_post_categories`.`lft` >= `spud_post_categories`.`rgt` OR (`spud_post_categories`.`parent_id` IS NOT NULL AND (`spud_post_categories`.`lft` <= parent.`lft` OR `spud_post_categories`.`rgt` >= parent.`rgt`)))[0m
  [1m[35mSpudPostCategory Load (0.3ms)[0m  SELECT `spud_post_categories`.`lft`, COUNT(`spud_post_categories`.`lft`) FROM `spud_post_categories` GROUP BY `spud_post_categories`.`lft` HAVING COUNT(`spud_post_categories`.`lft`) > 1 LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.`rgt`, COUNT(`spud_post_categories`.`rgt`) FROM `spud_post_categories` GROUP BY `spud_post_categories`.`rgt` HAVING COUNT(`spud_post_categories`.`rgt`) > 1 LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`parent_id` IS NULL ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPost Load (0.6ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` INNER JOIN `spud_post_categories_posts` ON `spud_posts`.`id` = `spud_post_categories_posts`.`spud_post_id` WHERE `spud_post_categories_posts`.`spud_post_category_id` = 5[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5
  [1m[36mSpudPost Load (0.3ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.3ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1[0m
  [1m[35m (1.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.2ms)[0m  SET FOREIGN_KEY_CHECKS = 0
  [1m[36m (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
  [1m[35m (3.1ms)[0m  select table_name from information_schema.views where table_schema = 'spud_blog_test'
  [1m[36m (6.3ms)[0m  [1mTRUNCATE TABLE `spud_admin_permissions`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `spud_post_categories`;
  [1m[36m (4.2ms)[0m  [1mTRUNCATE TABLE `spud_post_categories_posts`;[0m
  [1m[35m (4.9ms)[0m  TRUNCATE TABLE `spud_post_comments`;
  [1m[36m (6.3ms)[0m  [1mTRUNCATE TABLE `spud_post_sites`;[0m
  [1m[35m (6.2ms)[0m  TRUNCATE TABLE `spud_posts`;
  [1m[36m (3.2ms)[0m  [1mTRUNCATE TABLE `spud_user_settings`;[0m
  [1m[35m (7.1ms)[0m  TRUNCATE TABLE `spud_users`;
  [1m[36m (0.1ms)[0m  [1mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (1.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` IS NULL LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` IS NULL LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2013-01-02 15:29:40', NULL, 1, 'Test', 0, 2, '2013-01-02 15:29:40', 'test')
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 1 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 1)
  [1m[36mSpudPost Load (0.4ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.4ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Test' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'test' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.3ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 1' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-1' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 2' LIMIT 1
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-2' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 3' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-3' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2013-01-02 15:29:40', NULL, 1, 'Post Category 3', 0, 2, '2013-01-02 15:29:40', 'post-category-3')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 2)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 4' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-4' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2013-01-02 15:29:40', NULL, 3, 'Post Category 4', 2, 4, '2013-01-02 15:29:40', 'post-category-4')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 3 THEN 2 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 3) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 3 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 3)
  [1m[36mSpudPost Load (0.1ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.4ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2013-01-01-post-1' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2013-01-02 15:29:40', 0, NULL, NULL, '2013-01-01 15:29:40', 1, 'Post 1', '2013-01-02 15:29:40', '2013-01-01-post-1', 1)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (1, 2)
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPost Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2013-01-01-post-2' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2013-01-02 15:29:40', 0, NULL, NULL, '2013-01-01 15:29:40', 1, 'Post 2', '2013-01-02 15:29:40', '2013-01-01-post-2', 1)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO `spud_post_categories_posts` (`spud_post_id`, `spud_post_category_id`) VALUES (2, 3)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSpudPost Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_posts` WHERE `spud_posts`.`url_name` = BINARY '2013-01-01-post-3' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `spud_posts` (`comments_count`, `comments_enabled`, `content`, `created_at`, `is_news`, `meta_description`, `meta_keywords`, `published_at`, `spud_user_id`, `title`, `updated_at`, `url_name`, `visible`) VALUES (0, 0, 'Test Content', '2013-01-02 15:29:40', 0, NULL, NULL, '2013-01-01 15:29:40', 1, 'Post 3', '2013-01-02 15:29:40', '2013-01-01-post-3', 1)[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 1 AND `spud_post_categories`.`lft` < 4) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategoriesPost Load (0.2ms)[0m  SELECT `spud_post_categories_posts`.* FROM `spud_post_categories_posts` WHERE `spud_post_categories_posts`.`spud_post_category_id` IN (2, 3)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `spud_posts` WHERE `spud_posts`.`id` IN (1, 2)[0m
  [1m[35m (1.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 5' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.1ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-5' LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2013-01-02 15:29:41', NULL, 1, 'Post Category 5', 0, 2, '2013-01-02 15:29:41', 'post-category-5')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 4)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 0 WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 1 AND `spud_post_categories`.`rgt` >= 2) AND (`spud_post_categories`.id != 4)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 6' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-6' LIMIT 1
  [1m[36mSpudPostCategory Load (0.3ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2013-01-02 15:29:41', NULL, 3, 'Post Category 6', 4, 4, '2013-01-02 15:29:41', 'post-category-6')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 2 AND 2 THEN `lft` + 4 - 2 WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 2 - 3 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 2 AND 2 THEN `rgt` + 4 - 2 WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 2 - 3 ELSE `rgt` END, `parent_id` = CASE WHEN id = 5 THEN 4 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 5)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 5 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 5)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 2 AND `spud_post_categories`.`lft` < 3) AND (`spud_post_categories`.id != 5) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 5)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 1 WHERE `spud_post_categories`.`id` = 5 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 2 AND `spud_post_categories`.`rgt` >= 3) AND (`spud_post_categories`.id != 5)
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSpudPostCategory Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`name` = BINARY 'Post Category 7' LIMIT 1[0m
  [1m[35mSpudPostCategory Exists (0.2ms)[0m  SELECT 1 AS one FROM `spud_post_categories` WHERE `spud_post_categories`.`url_name` = BINARY 'post-category-7' LIMIT 1
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` ORDER BY `spud_post_categories`.`rgt` desc LIMIT 1 FOR UPDATE[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `spud_post_categories` (`created_at`, `depth`, `lft`, `name`, `parent_id`, `rgt`, `updated_at`, `url_name`) VALUES ('2013-01-02 15:29:41', NULL, 5, 'Post Category 7', 5, 6, '2013-01-02 15:29:41', 'post-category-7')
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 ORDER BY `spud_post_categories`.`lft` LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1 FOR UPDATE
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `lft` = CASE WHEN `lft` BETWEEN 3 AND 4 THEN `lft` + 6 - 4 WHEN `lft` BETWEEN 5 AND 6 THEN `lft` + 3 - 5 ELSE `lft` END, `rgt` = CASE WHEN `rgt` BETWEEN 3 AND 4 THEN `rgt` + 6 - 4 WHEN `rgt` BETWEEN 5 AND 6 THEN `rgt` + 3 - 5 ELSE `rgt` END, `parent_id` = CASE WHEN id = 6 THEN 5 ELSE `parent_id` END ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 3 AND `spud_post_categories`.`rgt` >= 4) AND (`spud_post_categories`.id != 6)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 2 WHERE `spud_post_categories`.`id` = 6 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 3 AND `spud_post_categories`.`rgt` >= 4) AND (`spud_post_categories`.id != 6)
  [1m[36mSpudPostCategory Load (0.2ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` >= 3 AND `spud_post_categories`.`lft` < 4) AND (`spud_post_categories`.id != 6) ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.`lft`, `spud_post_categories`.`rgt`, `spud_post_categories`.`parent_id` FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1 FOR UPDATE
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 3 AND `spud_post_categories`.`rgt` >= 4) AND (`spud_post_categories`.id != 6)
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE `spud_post_categories` SET `depth` = 2 WHERE `spud_post_categories`.`id` = 6 ORDER BY `spud_post_categories`.`lft`[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `spud_post_categories` WHERE (`spud_post_categories`.`lft` <= 3 AND `spud_post_categories`.`rgt` >= 4) AND (`spud_post_categories`.id != 6)
  [1m[36mSpudPost Load (0.1ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `spud_post_categories` SET `parent_id` = 4 WHERE `spud_post_categories`.`parent_id` = 5 ORDER BY lft
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `spud_post_categories` LEFT OUTER JOIN `spud_post_categories` AS parent ON `spud_post_categories`.`parent_id` = parent.id WHERE (`spud_post_categories`.`lft` IS NULL OR `spud_post_categories`.`rgt` IS NULL OR `spud_post_categories`.`lft` >= `spud_post_categories`.`rgt` OR (`spud_post_categories`.`parent_id` IS NOT NULL AND (`spud_post_categories`.`lft` <= parent.`lft` OR `spud_post_categories`.`rgt` >= parent.`rgt`)))[0m
  [1m[35mSpudPostCategory Load (1.0ms)[0m  SELECT `spud_post_categories`.`lft`, COUNT(`spud_post_categories`.`lft`) FROM `spud_post_categories` GROUP BY `spud_post_categories`.`lft` HAVING COUNT(`spud_post_categories`.`lft`) > 1 LIMIT 1
  [1m[36mSpudPostCategory Load (0.4ms)[0m  [1mSELECT `spud_post_categories`.`rgt`, COUNT(`spud_post_categories`.`rgt`) FROM `spud_post_categories` GROUP BY `spud_post_categories`.`rgt` HAVING COUNT(`spud_post_categories`.`rgt`) > 1 LIMIT 1[0m
  [1m[35mSpudPostCategory Load (0.2ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`parent_id` IS NULL ORDER BY `spud_post_categories`.`lft`
  [1m[36mSpudPost Load (0.4ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` INNER JOIN `spud_post_categories_posts` ON `spud_posts`.`id` = `spud_post_categories_posts`.`spud_post_id` WHERE `spud_post_categories_posts`.`spud_post_category_id` = 5[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 5
  [1m[36mSpudPost Load (0.2ms)[0m  [1mSELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000[0m
  [1m[35mSpudPost Load (0.2ms)[0m  SELECT `spud_posts`.* FROM `spud_posts` WHERE (`spud_posts`.`id` >= 0) ORDER BY `spud_posts`.`id` ASC LIMIT 1000
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35mSpudPostCategory Load (0.1ms)[0m  SELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 6 LIMIT 1
  [1m[36mSpudPostCategory Load (0.1ms)[0m  [1mSELECT `spud_post_categories`.* FROM `spud_post_categories` WHERE `spud_post_categories`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
